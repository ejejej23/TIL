# DML 성능에 영향을 미치는 요소
- 인덱스
- 무결성 제약
- 조건절
- 서브쿼리
- Redo로깅
- Undo로깅
- LOCK
- 커밋

## 데이터 무결성 규칙
- 개체 무결성
- 참조 무결성
- 도메인 무결성
- 사용자 정의 무결성(OR 업무제약조건)

## Redo 로그
### 사용되는 세가지 목적
1. Database Recovery
2. Cache Recovery
3. Fast Commit

: 서버프로세스가 변경한 버퍼블록들을 디스크에 기록하지 않았더라도 커밋 시점에 redo로그를 디스크에 안전하게 기록했다면 그순간부터 트랜젝션의 영속성은 보장된다

## Undo 로그
### 사용되는 세가지 목적
1. Transaction Rollback
2. Transaction Recovery
3. Read Consistency

### SQL이 실행되는 3단계
- Parse Call :sql 파싱과 최적화 수행단계. sql과 실행계획을 라이브러리에서 찾으면 최적화단계는 생략할 수 있다.
- Execute Call : 말그대로 sql 실행단계. dml은 이 단계에서 끝나지만 select 문은 fetch 단계를 거친다
- Fetch Call : 데이터를 읽어 사용자에게 결과집합을 전송하는 과정. 전송할 데이터가 많은 경우 fetch call 이 여러번 일어날 수 있다.

#### sql 실행단계는 call의 발생위치에 따라 두가지로 나뉘기도 한다.

- User call : 네트워크를 경유해 DBMS 외부에서 인입되는 Call. 3-tier 아키텍쳐에서는 was(또는 ap서버)에서 발생하는 call이다
- Recursive call : DBMS 내부에서 발생하는 Call. 사용자정의 함수/프로시저/트리거 내장 sql등이 해당한다.

-----
## 테이블 파티션

### 파티셔닝
: 테이블 또는 인덱스 데이터를 특정 컬럼(파티션 키)에 따라 별도 세그먼트에 나눠서 저장하는 것

### 파티셔닝의 장점
- 관리적 측면 : 파티션 단위 백업, 추가, 삭제, 변경 -> 가용성 향상
- 성능적 측면 : 파티션 단위 조회 및 dml, 경합 또는 부하 분산

### 파티션 pruning
: sql 하드파싱이나 실행시점에 조건절을 분석해서 읽지 않아도 되는 파티션 세그먼트를 액세스 대상에서 제외하는 기능

### 파티션 종류
1. range
2. 해시
3. 리스트

### 파티션의 구분
1. 파티션 여부에 따른 구분
   1. 파티션 테이블
   2. 비파티션 테이블
2. 인덱스 파티션 범위에 따른 구분
   1. 로컬 파티션 인덱스
   2. 글로벌 파티션 인덱스
   3. 비파티션 인덱스

## 서비스 중단 없이 파티션 구조를 빠르게 변경하려면 아래 조건을 모두 만족해야한다
1. 파티션 키와 커팅기준 컬럼이 일치해야 함 
2. 파티션 단위와 커팅 주기가 일치해야 함
3. 모든 인덱스가 로컬 파티션 인덱스여야 함

## 조건을 만족하는 데이터가 대다수이면 대량 데이터를 지울 게 아니라 남길 데이터만 백업했다가 재입력하는 방식이 빠르다.
